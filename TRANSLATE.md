# 翻訳手順

* テキストファイルを起こす。
* テキスト整形する。
  * (自動)１段落１行に纏める。段落間に空行追加。
  * (自動)タイトル先頭に ### を入れる。前後に空行追加。
  * コード部分をタブ下げ(4カラム)
  * 表を整える。表各行先頭に1スペース入れておく、<table>環境で囲む。
  * description部分を整形、環境タグで囲み、||...||を追加。  
    ワード定義系は自動処理も使った。  
    do_preprocess.sh/do_desc.shに環境名追記、  
    Makefileにターゲット追加、出力を確認(*_x.mdファイル)。
  * 環境すっぽ抜け確認、環境内で行頭に XXX を足してすっぽ抜け場所を見つける。
  * 脚注 ^^X, ^^X{ ... }を追加。do_note2.sh出力を確認。
  * vivliostyle buildして、pdfができるかどうか、見栄えを確認しておく。
* CSS整備する
  * 表紙(レイアウトしまくり)
  * 基本の段下げ、今回は本文(pタグ)を4em下げた。
  * その他のタグのmargin-leftを0に指定する。さもなくばそこだけ4em下がってしまう。
  * 各種desc, クラス名接頭子に環境名がついているのでクラス名からスタイルを起こす。
  * word部分のスタイル(背景色を付けておくと分かりやすい)
  * itemize手書き(必要に応じol, ulタグも使う)
  * 図面 png ファイルを作り imgタグで埋め込む。
  * コード部分の空白・段下げ調整
  * この段階で英文版として見られる体裁にしてしまう。
  * 改ページ調整してもよい(英文版としての完成度が欲しいとき)  
    和文を貼り付けて入れ替えるとぐちゃぐちゃになるので、和文版だけでよいならここで改ページ調整はしない。
* 和訳貼り付け
  * 段落ごとに訳して貼り付けてゆく。
  * 英語を残しつつ和訳を追記してゆく。後でレビューする際に対比必要なので。
* 和訳語尾調整(ja_wordcheck.sh)
  * 和訳全部貼り付けてからまとめて行う。途中でやると2度手間になる。
  * 適宜word.listに変換パターンを追記してゆく。
  * <red>タグでサーチして確認してタグを消してゆく。
  * CSSで赤字{ color: red; }にしてPDFで見てもよい。
* 和訳レビュー
  * 段落ごとに和文をチェック、
  * 抜け漏れが多いのでここで確実に補う。
  * 正確性、
  * `..`, *..*, **..**(これは英語段階で入れておいても構わない。和訳で乱れるが直す手間はVScodeの見た目が乱れるので結構容易)
